download.file(URL, file.path(filepath, filename), 'curl')
unzip(file.path(filepath,filename), exdir = filepath)
unlink(file.path(filepath,filename))
dataf <- read.delim(file.path(filepath,"household_power_consumption.txt"), sep = ";")
dataf$Date <- as.Date(dataf$Date, "%d/%m/%Y")
dataf <- subset(dataf, Date %between% c("2007-02-01","2007-02-02"))
head(dataf)
}
plot1()
plot1 <- function()
{
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
filepath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(filepath)) dir.create(filepath)
download.file(URL, file.path(filepath, filename), 'curl')
unzip(file.path(filepath,filename), exdir = filepath)
unlink(file.path(filepath,filename))
dataf <- read.delim(file.path(filepath,"household_power_consumption.txt"), sep = ";")
dataf$Date <- as.Date(dataf$Date, "%d/%m/%Y")
dataf <- subset(dataf, Date <= "2007-02-02" & Date >= "2007-02-01")
head(dataf)
}
plot1()
plot1 <- function()
{
library(png)
library(R.utils)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
classes <- c("Date" = "myDate")
powerdata <- read.table(filepath, header = T, colClasses = classes, sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata$Global_active_power <- as.numeric(powerdata$Global_active_power)
filepath <- file.path(rootpath, "plot1.png")
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot1()
setwd("M:/DataAnalysisProject/ExData_Plotting1")
dir()
plot1()
system.time(plot1())
source("Plot1.R")
plot1()
plot1 <- function()
{
library(png)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
classes <- c("Date" = "myDate")
powerdata <- read.table(filepath, header = T, colClasses = classes, sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
#powerdata$Global_active_power <- as.numeric(powerdata$Global_active_power)
filepath <- file.path(rootpath, "plot1.png")
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot1()
plot1 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
classes <- c("Date" = "myDate")
powerdata <- read.table(filepath, header = T, colClasses = classes, sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
#powerdata$Global_active_power <- as.numeric(powerdata$Global_active_power)
filepath <- file.path(rootpath, "plot1.png")
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot1()
system.time(plot1())
plot1 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
classes <- c("Date" = "myDate")
powerdata <- read.table(filepath, header = T, colClasses = classes, sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
#powerdata$Global_active_power <- as.numeric(powerdata$Global_active_power)
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
hist(powerdata$Global_active_power, col = "green", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot1()
plot1 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
classes <- c("Date" = "myDate")
powerdata <- read.table(filepath, header = T, colClasses = classes, sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
#powerdata$Global_active_power <- as.numeric(powerdata$Global_active_power)
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot1()
plot1 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
classes <- c("Date" = "myDate")
powerdata <- read.table(filepath, header = T, colClasses = classes, sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"))
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot1()
plot1 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
filepath <- file.path(rootpath,"powerdata.txt")
if(!dir.exists(filepath))
{
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "myDate"), sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"), sep = ";")
}
else
{
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "Date"), sep = ";")
unlink(filepath)
powerdata$Time <- strptime(powerdata$Time, "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
}
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot1()
plot1()
plot2 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
filepath <- file.path(rootpath,"powerdata.txt")
if(!file.exists(filepath))
{
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "myDate"), sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"), sep = ";")
}
else
{
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "Date"), sep = ";")
unlink(filepath)
powerdata$Time <- strptime(powerdata$Time, "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
}
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot2()
plot2()
plot2 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
filepath <- file.path(rootpath,"powerdata.txt")
if(!file.exists(filepath))
{
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "myDate"), sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"), sep = ";")
}
else
{
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "Date"), sep = ";")
powerdata$Time <- strptime(powerdata$Time, "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
}
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
hist(powerdata$Global_active_power, col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot2()
plot2()
plot2()
plot2 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
filepath <- file.path(rootpath,"powerdata.txt")
if(!file.exists(filepath))
{
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "myDate"), sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"), sep = ";")
}
else
{
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "Date"), sep = ";")
powerdata$Time <- strptime(powerdata$Time, "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
}
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
plot(powerdata$Global_active_power, powerdata$Date)
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot2()
plot2 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
filepath <- file.path(rootpath,"powerdata.txt")
if(!file.exists(filepath))
{
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "myDate"), sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"), sep = ";")
}
else
{
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "Date"), sep = ";")
powerdata$Time <- strptime(powerdata$Time, "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
}
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
plot(powerdata$Time, powerdata$Global_active_power)
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot2()
plot2 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
filepath <- file.path(rootpath,"powerdata.txt")
if(!file.exists(filepath))
{
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "myDate"), sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"), sep = ";")
}
else
{
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "Date"), sep = ";")
powerdata$Time <- strptime(powerdata$Time, "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
}
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
plot(powerdata$Time, powerdata$Global_active_power, type = "l", ylab = "Global Active Power")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot2()
plot2 <- function()
{
library(png)
library(dplyr)
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
rootpath <- file.path(".","Plots")
filename <- "household_power_consumption.zip"
if(!dir.exists(rootpath)) dir.create(rootpath)
setClass('myDate')
setAs("character", "myDate", function(from) as.Date(from, format = "%d/%m/%Y"))
filepath <- file.path(rootpath,"powerdata.txt")
if(!file.exists(filepath))
{
filepath <- file.path(rootpath, filename)
download.file(URL, filepath, 'curl')
unzip(filepath, exdir = rootpath)
unlink(filepath)
filepath <- file.path(rootpath,"household_power_consumption.txt")
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "myDate"), sep = ";")
unlink(filepath)
powerdata <- subset(powerdata, Date <= "2007-02-02" & Date >= "2007-02-01")
powerdata$Time <- strptime(paste(powerdata$Date, powerdata$Time), "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
write.table(powerdata,file.path(rootpath,"powerdata.txt"), sep = ";")
}
else
{
powerdata <- read.table(filepath, header = T, colClasses = c("Date" = "Date"), sep = ";")
powerdata$Time <- strptime(powerdata$Time, "%Y-%m-%d %H:%M:%S")
powerdata <- powerdata %>% mutate_if(sapply(powerdata, is.character), as.numeric)
}
filepath <- file.path(rootpath, "plot1.png")
if(exists(filepath)) unlink(filepath)
png(filepath)
plot(powerdata$Time, powerdata$Global_active_power, type = "l", xlab = "",
ylab = "Global Active Power (kilowatts)")
dev.off()
img <- readPNG(filepath)
grid::grid.raster(img)
}
plot2()
source("plot1.R")
plot1()
source("plot2.R")
plot2()
